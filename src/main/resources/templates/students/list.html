<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{layout/header :: header}">
    <title>List Student</title>
</head>

<body>

	<!-- NAVBAR -->
	<div th:replace="~{layout/navbar :: navbar}"></div>

	<div class="container mt-4 mb-5 content-wrapper">

		<!-- HEADER -->
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h3 class="fw-bold text-primary">Student List</h3>
			<input type="hidden" name="page" th:value="${currentPage}" />
			<input type="hidden" name="size" th:value="${size}" />
			
			<a th:href="@{/students/new(size=${size}, page=${currentPage})}" class="btn btn-primary shadow-sm">
			    <i class="bi bi-plus-circle me-1"></i> Add Student
			</a>
			
		</div>

		<!-- SEARCH -->
		<div class="card p-3 mb-4 shadow-sm">

			<form class="row g-2 align-items-center" method="get" th:action="@{/students/list(size=${size}, page=${currentPage})}">
				<div class="col-md-4">
					<input type="hidden" name="page" th:value="${currentPage}" />
								<input type="hidden" name="size" th:value="${size}" />
					<input type="text" name="keyword" th:value="${keyword}" placeholder="Search by name..."
						class="form-control form-control-lg shadow-sm">
				</div>

				<div class="col-auto">
					<button class="btn btn-primary btn-lg"><i class="bi bi-search"></i></button>
				</div>

				<div class="col-auto">
					<a th:href="@{/students/list(size=${size}, page=${currentPage})}" class="btn btn-outline-secondary btn-lg">
						<i class="bi bi-arrow-repeat"></i>
					</a>
				</div>
			</form>

		</div>

		<!-- NO RESULTS -->
		<div th:if="${students.size() == 0 and keyword != ''}" class="text-center mt-5">
			<i class="bi bi-search text-secondary" style="font-size: 3rem;"></i>
			<p class="text-danger mt-3 fs-5">
				No students found for "<span th:text="${keyword}"></span>"
			</p>
		</div>

		<!-- TABLE -->
		<div class="mt-3" th:replace="~{fragments/table :: table}"></div>

		<!-- PAGINATION -->
		<div class="mt-3" th:replace="~{fragments/pagination :: pagination}"></div>

		<!-- MODALS -->
		<div th:replace="~{students/modals/viewModal :: viewModal}"></div>
		<div th:replace="~{students/modals/deleteModal :: deleteModal}"></div>

	</div>

	<!-- FOOTER -->
	<div th:replace="~{layout/footer :: footer}"></div>

	<!-- SUCCESS TOAST -->
	    <div id="successToast"
	         class="toast text-bg-success border-0 position-fixed bottom-0 end-0 m-3"
	         role="alert"
	         data-bs-autohide="true"
	         data-bs-delay="3000"
	         th:attr="data-msg=${successMessage}">
	         
	        <div class="d-flex">
	            <div class="toast-body">
	                <i class="bi bi-check-circle-fill me-2"></i>
	                <span id="successMessage"></span>
	            </div>
	            <button type="button" class="btn-close btn-close-white me-2 m-auto"
	                    data-bs-dismiss="toast"></button>
	        </div>
	    </div>

	    <!-- ERROR TOAST -->
	    <div id="errorToast"
	         class="toast text-bg-danger border-0 position-fixed bottom-0 end-0 m-3"
	         role="alert"
	         data-bs-autohide="true"
	         data-bs-delay="3000"
	         th:attr="data-msg=${errorMessage}">
	         
	        <div class="d-flex">
	            <div class="toast-body">
	                <i class="bi bi-x-circle-fill me-2"></i>
	                <span id="errorMessage"></span>
	            </div>
	            <button type="button" class="btn-close btn-close-white me-2 m-auto"
	                    data-bs-dismiss="toast"></button>
	        </div>
	    </div>

</body>

</html>